(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7941],{7418:function(e,a,r){Promise.resolve().then(r.bind(r,311))},311:function(e,a,r){"use strict";r.r(a);var t=r(7437),l=r(2265);a.default=()=>{let[e,a]=(0,l.useState)(""),[r,s]=(0,l.useState)(null),[n,i]=(0,l.useState)([]),[o,c]=(0,l.useState)(null);(0,l.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=await fetch("/api/gallery"),a=await e.json();i(a)}catch(e){console.error("Error fetching server data:",e)}},u=async a=>{a.preventDefault();let t=new FormData;t.append("id",e),t.append("image",r);try{let e=null!==o?"/api/gallery?index=".concat(o):"/api/gallery",a=null!==o?"PUT":"POST";await fetch(e,{method:a,body:t}),alert("Server data saved successfully!"),d(),y()}catch(e){console.error("Error saving server data:",e),alert("Failed to save server data.")}},m=e=>{if(e<0||e>=n.length){console.error("Invalid index:",e);return}let r=n[e];if(!r){console.error("Server data is undefined at index:",e);return}a(r.id||""),c(e)},h=async e=>{try{await fetch("/api/gallery?index=".concat(e),{method:"DELETE"}),alert("Server data deleted successfully!"),d()}catch(e){console.error("Error deleting server data:",e),alert("Failed to delete server data.")}},y=()=>{a(""),s(null),c(null)},p=async e=>{if(0===e)return;let a=[...n];[a[e-1],a[e]]=[a[e],a[e-1]],i(a);try{await fetch("/api/sort",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),console.log("Gallery order updated successfully!")}catch(e){console.error("Error updating gallery order:",e),alert("Failed to update gallery order.")}},b=async e=>{if(e===n.length-1)return;let a=[...n];[a[e],a[e+1]]=[a[e+1],a[e]],console.log("Updated servers:",a),i(a);try{await fetch("/api/sort",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),console.log("Gallery order updated successfully!")}catch(e){console.error("Error updating gallery order:",e),alert("Failed to update gallery order.")}};return(0,t.jsxs)("div",{className:"container mt-5",children:[(0,t.jsx)("h1",{className:"text-center mb-4",children:"Admin Dashboard For Gallery"}),(0,t.jsx)("div",{className:"card mx-auto shadow-lg p-4",style:{maxWidth:"600px",borderRadius:"15px"},children:(0,t.jsxs)("form",{onSubmit:u,children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Gallery ID:"}),(0,t.jsx)("textarea",{className:"form-control",value:e,onChange:e=>a(e.target.value),placeholder:"Enter gallery id",style:{borderRadius:"10px"}})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Gallery Picture:"}),(0,t.jsx)("input",{type:"file",className:"form-control",onChange:e=>s(e.target.files[0]),style:{borderRadius:"10px"}})]}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary w-100",style:{borderRadius:"10px",backgroundColor:"#FF6600"},children:null!==o?"Update":"Save"})]})}),(0,t.jsxs)("div",{className:"mt-5",children:[(0,t.jsx)("h2",{className:"text-center",children:"Existing Gallery"}),(0,t.jsx)("ul",{className:"list-group",children:n.map((e,a)=>(0,t.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,t.jsx)("img",{src:e.imageUrl,alt:"Gallery",style:{width:"100px",height:"100px"}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{className:"btn btn-secondary btn-sm me-2",onClick:()=>p(a),children:"↑"}),(0,t.jsx)("button",{className:"btn btn-secondary btn-sm me-2",onClick:()=>b(a),children:"↓"}),(0,t.jsx)("button",{className:"btn btn-warning btn-sm me-2",onClick:()=>m(a),children:"Edit"}),(0,t.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>h(a),children:"Delete"})]})]},e.id))})]})]})}}},function(e){e.O(0,[2971,7023,1744],function(){return e(e.s=7418)}),_N_E=e.O()}]);