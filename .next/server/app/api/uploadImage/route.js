"use strict";(()=>{var e={};e.id=1593,e.ids=[1593],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2638:(e,r,o)=>{o.r(r),o.d(r,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>x,staticGenerationAsyncStorage:()=>f});var t={};o.r(t),o.d(t,{POST:()=>c});var a=o(9303),s=o(8716),i=o(3131),n=o(7070),u=o(7147),l=o.n(u),p=o(1017),d=o.n(p);async function c(e){try{console.log("Upload API called");let r=(await e.formData()).get("file");if(!r)return console.error("No file uploaded"),n.NextResponse.json({error:"No file uploaded"},{status:400});console.log("File received:",r.name,r.size,r.type);let o=d().join(process.cwd(),"public","assets","images","resources"),t=d().join(o,r.name);l().existsSync(o)||(console.log("Directory does not exist. Creating:",o),l().mkdirSync(o,{recursive:!0}));let a=Buffer.from(await r.arrayBuffer());try{l().writeFileSync(t,a),console.log("File written to:",t)}catch(e){return console.error("Error writing file:",e),n.NextResponse.json({error:"Failed to write file"},{status:500})}return n.NextResponse.json({imageUrl:`/assets/images/resources/${r.name}`})}catch(e){return console.error("Error in upload API:",e),n.NextResponse.json({error:"Failed to upload image"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/uploadImage/route",pathname:"/api/uploadImage",filename:"route",bundlePath:"app/api/uploadImage/route"},resolvedPagePath:"/home/ziad/ASG_Distribution/app/api/uploadImage/route.js",nextConfigOutput:"",userland:t}),{requestAsyncStorage:g,staticGenerationAsyncStorage:f,serverHooks:x}=m,h="/api/uploadImage/route";function v(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:f})}}};var r=require("../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),t=r.X(0,[8948,5972],()=>o(2638));module.exports=t})();